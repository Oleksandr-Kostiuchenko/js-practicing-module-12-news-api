{"version":3,"file":"index.js","sources":["../src/js/news-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["//* Import libraries\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\n//* Export fetch function\nexport const fetchNews = async (userQuery, page) => {\n    const galleryData = await axios.get(`https://newsapi.org/v2/everything?q=${userQuery}&apiKey=ee921bec82754786b568b8b5c41f6003&pageSize=15&page=${page}`);\n\n    return galleryData;\n}\n\n//* Export fetch function with filter\nexport const fetchNewsByFilter = async (userQuery, page) => {\n    const galleryData = await axios.get(`https://newsapi.org/v2/everything?q=${userQuery}&apiKey=ee921bec82754786b568b8b5c41f6003&pageSize=15&page=${page}&sortBy=publishedAt`);\n\n    return galleryData;\n}","//* Export render function\nexport const renderArticle = newsObj => {\n    return `\n    <li class=\"article-item\">\n        <a class=\"aricle-title\" href=\"${newsObj.url}\" target=\"_blank\">${newsObj.title} - ${newsObj.author}</a>\n\n        <img class=\"article-image\" src=\"${newsObj.urlToImage}\" alt=\"news-image\">\n\n        <p class=\"article-description\">${newsObj.description}</p>\n        <p class=\"article-content\">${newsObj.content}</p>\n\n        <p class=\"article-date\">${newsObj.publishedAt}</p>\n    </li>\n    `\n}","//TODO: Пошук новин з NewsAPI\n\n//* Import libraries\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\n//* Import modules\nimport { fetchNews, fetchNewsByFilter } from \"./js/news-api\";\nimport { renderArticle } from \"./js/render-functions\";\n\n//* Find elements\nconst formEl = document.querySelector('.news-form');\nconst inputEl = document.querySelector('.news-input');\nconst buttonEl = document.querySelector('.search-news-btn');\nconst newsListEl = document.querySelector('.news-list');\nconst loadMoreButtonEl = document.querySelector('.load-more-btn');\nconst loader = document.querySelector('.loader');\nconst loaderMore = document.querySelector('.loader-more');\n\n//* Loader settings\nconst checkboxEl = document.querySelector('#theme-switch');\nlet sortByDate = false;\n\nconst onCheckboxClick = event => {\n    console.log(checkboxEl.checked);\n    if (checkboxEl.checked) {\n        sortByDate = true;\n    } else {\n        sortByDate = false;\n    }\n}\n\ncheckboxEl.addEventListener('click', onCheckboxClick); \n\n//* Function & Event listener\nlet page = 1;\nlet userQuery;\nlet totalPages;\n\nconst onFormSubmit = async event => {\n    event.preventDefault();\n    \n    if (userQuery === '') {\n        iziToast.error({\n            title: 'Error',\n            titleSize: '35',\n            message: 'Please fill the gap!',\n            messageSize: '30',\n            position: 'bottomRight'\n        });\n        return;\n    }\n\n    try {\n        loadMoreButtonEl.classList.add('is-hidden');\n        page = 1;\n        userQuery = inputEl.value.trim();\n\n        loader.classList.remove('hidden');\n\n        let newsData;\n        if (sortByDate) {\n            newsData = await fetchNewsByFilter(userQuery, page);\n        } else {\n            newsData = await fetchNews(userQuery, page);\n        }\n\n        loader.classList.add('hidden');\n\n        if (newsData.data.totalResults === 0) {\n            iziToast.error({\n                title: 'Error',\n                titleSize: '25',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                messageSize: '15',\n                position: 'bottomRight'\n            });\n            return;\n        }\n\n        console.log(newsData.data.articles);\n\n        newsListEl.innerHTML = ''\n        const newsHTML = [];\n        newsData.data.articles.forEach(element => {\n            newsHTML.push(renderArticle(element));\n        });\n        \n        console.log(newsHTML);\n        newsListEl.insertAdjacentHTML('beforeend', newsHTML.join(''))\n\n        window.scrollBy({\n            top: 500,\n            left: 0,\n            behavior: \"smooth\",\n        });\n\n        totalPages = Math.ceil(newsData.data.totalResults / newsHTML.length);\n        iziToast.success({\n            message: `Sucess! ${totalPages * newsHTML.length} news are found!`,\n            messageSize: '30',\n            position: 'bottomRight'\n        });\n        \n        if (totalPages <= 1) {\n            return;\n        }\n        else if (page <= totalPages) {\n                if (page === totalPages) {\n                    loadMoreBtn.classList.add('is-hidden');\n                    loadMoreButtonEl.addEventListener('click', onLoadMoreBtnClick);\n                    return;\n                }\n\n            loadMoreButtonEl.classList.remove('is-hidden');\n\n            loadMoreButtonEl.removeEventListener('click', onLoadMoreBtnClick);\n            loadMoreButtonEl.addEventListener('click', onLoadMoreBtnClick);\n        }\n    } catch (err) {\n        iziToast.error({\n            message: 'Sorry! Something went wrong(',\n            messageSize: '30',\n            position: 'bottomRight'\n        });\n        console.log(err);\n\n        return;\n    }\n};\n\nconst onLoadMoreBtnClick = async event => {\n    try {\n        page++;\n        console.log(page);\n\n        loaderMore.classList.remove('hidden');\n\n        const newsData = await fetchNews(userQuery, page);\n\n        loaderMore.classList.add('hidden');\n\n        const newsHTML = []\n        newsData.data.articles.forEach(element => {\n            newsHTML.push(renderArticle(element));\n        })\n\n        newsListEl.insertAdjacentHTML('beforeend', newsHTML.join(''));\n\n        const newsItem = document.querySelector('.article-item');\n        const rect = newsItem.getBoundingClientRect()\n\n        window.scrollBy({\n            top: rect.height,\n            left: 0,\n            behavior: \"smooth\",\n        });\n\n        if (page === totalPages) {\n            iziToast.info({\n                    title: '',\n                    titleSize: '25',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    messageSize: '20',\n                    position: 'bottomRight'\n            });\n\n            loadMoreButtonEl.classList.add('is-hidden');\n            loadMoreButtonEl.removeEventListener('click', onLoadMoreBtnClick);\n            return;\n    }\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nformEl.addEventListener('submit', onFormSubmit)"],"names":["fetchNews","userQuery","page","axios","fetchNewsByFilter","renderArticle","newsObj","formEl","inputEl","newsListEl","loadMoreButtonEl","loader","loaderMore","checkboxEl","sortByDate","onCheckboxClick","event","totalPages","onFormSubmit","iziToast","newsData","newsHTML","element","onLoadMoreBtnClick","err","rect"],"mappings":"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"}
{"version":3,"file":"index.js","sources":["../src/js/news-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["//* Import libraries\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\n//* Export fetch function\nexport const fetchNews = async (userQuery, page) => {\n    const galleryData = await axios.get(`https://newsapi.org/v2/everything?q=${userQuery}&apiKey=ee921bec82754786b568b8b5c41f6003&pageSize=15&page=${page}`,{\n        headers: {\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64)\",\n        }\n    }\n    );\n\n    return galleryData;\n}","//* Export render function\nexport const renderArticle = newsObj => {\n    return `\n    <li class=\"article-item\">\n        <a class=\"aricle-title\" href=\"${newsObj.url}\" target=\"_blank\">${newsObj.title} - ${newsObj.author}</a>\n\n        <img class=\"article-image\" src=\"${newsObj.urlToImage}\" alt=\"news-image\">\n\n        <p class=\"article-description\">${newsObj.description}</p>\n        <p class=\"article-content\">${newsObj.content}</p>\n\n        <p class=\"article-date\">${newsObj.publishedAt}</p>\n    </li>\n    `\n}","//TODO: Пошук новин з NewsAPI\n\n//* Import libraries\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\n//* Import modules\nimport { fetchNews } from \"./js/news-api\";\nimport { renderArticle } from \"./js/render-functions\";\n\n//* Find elements\nconst formEl = document.querySelector('.news-form');\nconst inputEl = document.querySelector('.news-input');\nconst buttonEl = document.querySelector('.search-news-btn');\nconst newsListEl = document.querySelector('.news-list');\nconst loadMoreButtonEl = document.querySelector('.load-more-btn');\n\n//* Function & Event listener\nlet page = 1;\nlet userQuery;\nlet totalPages;\n\nconst onFormSubmit = async event => {\n    event.preventDefault();\n    \n    if (userQuery === '') {\n        iziToast.error({\n            title: 'Error',\n            titleSize: '35',\n            message: 'Please fill the gap!',\n            messageSize: '30',\n            position: 'bottomRight'\n        });\n        return;\n    }\n\n    try {\n        loadMoreButtonEl.classList.add('is-hidden');\n        page = 1;\n        userQuery = inputEl.value.trim();\n\n        const newsData = await fetchNews(userQuery, page);\n\n        if (newsData.data.totalResults === 0) {\n            iziToast.error({\n                title: 'Error',\n                titleSize: '25',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                messageSize: '15',\n                position: 'bottomRight'\n            });\n            return;\n        }\n\n        console.log(newsData.data.articles);\n\n        newsListEl.innerHTML = ''\n        const newsHTML = [];\n        newsData.data.articles.forEach(element => {\n            newsHTML.push(renderArticle(element));\n        });\n        \n        console.log(newsHTML);\n        newsListEl.insertAdjacentHTML('beforeend', newsHTML.join(''))\n\n        window.scrollBy({\n            top: 500,\n            left: 0,\n            behavior: \"smooth\",\n        });\n\n        totalPages = Math.ceil(newsData.data.totalResults / newsHTML.length);\n        iziToast.success({\n            message: `Sucess! ${totalPages * newsHTML.length} news are found!`,\n            messageSize: '30',\n            position: 'bottomRight'\n        });\n        \n        if (totalPages <= 1) {\n            return;\n        }\n        else if (page <= totalPages) {\n                if (page === totalPages) {\n                    loadMoreBtn.classList.add('is-hidden');\n                    loadMoreButtonEl.addEventListener('click', onLoadMoreBtnClick);\n                    return;\n                }\n\n            loadMoreButtonEl.classList.remove('is-hidden');\n\n            loadMoreButtonEl.removeEventListener('click', onLoadMoreBtnClick);\n            loadMoreButtonEl.addEventListener('click', onLoadMoreBtnClick);\n        }\n    } catch (err) {\n        iziToast.error({\n            message: 'Sorry! Something went wrong(',\n            messageSize: '30',\n            position: 'bottomRight'\n        });\n        console.log(err);\n\n        return;\n    }\n};\n\nconst onLoadMoreBtnClick = async event => {\n    try {\n        page++;\n        console.log(page);\n\n        const newsData = await fetchNews(userQuery, page);\n\n        const newsHTML = []\n        newsData.data.articles.forEach(element => {\n            newsHTML.push(renderArticle(element));\n        })\n\n        newsListEl.insertAdjacentHTML('beforeend', newsHTML.join(''));\n\n        const newsItem = document.querySelector('.article-item');\n        const rect = newsItem.getBoundingClientRect()\n\n        window.scrollBy({\n            top: rect.height,\n            left: 0,\n            behavior: \"smooth\",\n        });\n\n        if (page === totalPages) {\n            iziToast.info({\n                    title: '',\n                    titleSize: '25',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    messageSize: '20',\n                    position: 'bottomRight'\n            });\n\n            loadMoreButtonEl.classList.add('is-hidden');\n            loadMoreButtonEl.removeEventListener('click', onLoadMoreBtnClick);\n            return;\n    }\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nformEl.addEventListener('submit', onFormSubmit)"],"names":["fetchNews","userQuery","page","axios","renderArticle","newsObj","formEl","inputEl","newsListEl","loadMoreButtonEl","totalPages","onFormSubmit","event","iziToast","newsData","newsHTML","element","onLoadMoreBtnClick","err","rect"],"mappings":"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"}